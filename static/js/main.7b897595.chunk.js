(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){e.exports=a(413)},182:function(e,t){},184:function(e,t){},219:function(e,t){},220:function(e,t){},310:function(e,t){},410:function(e,t,a){},413:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(166),c=a.n(r),o=a(39),i=a(11),l=a(12),m=a(14),u=a(13),h=a(15),d=a(2),b=a(94),p=a(167),g=a.n(p);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var v=s.a.createElement("metadata",null,"Svg Vector Icons : http://www.onlinewebfonts.com/icon"),j=s.a.createElement("g",null,s.a.createElement("path",{d:"M956.3,21H43.5C24.9,21,10,36.1,10,54.6v649.5c0,18.5,15,33.6,33.5,33.6h134.1v207.9c0,13.8,8.5,26.2,21.4,31.1c3.9,1.7,8.1,2.3,12.2,2.3c9.1,0,18.2-3.8,24.7-10.8l212.3-230.5h508.3c18.5,0,33.6-15.1,33.6-33.6V54.6C989.9,36.1,974.8,21,956.3,21z M483.7,607.5H186v-83.9h297.8V607.5z M813.9,421.5H186v-83.9h627.9V421.5z M813.9,235.7H186v-83.9h627.9V235.7z"})),O=function(e){return s.a.createElement("svg",f({version:1.1,xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve"},e),v,j)},E=(a.p,function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).time=e.time.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"time",value:function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),s=a>=12?"pm":"am";return(a=(a%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+s}},{key:"render",value:function(){return s.a.createElement("div",{className:"message-list__message"},s.a.createElement("img",{src:"https://identicon-api.herokuapp.com/".concat(this.props.sender,"/50?format=png"),alt:"user avatar"}),s.a.createElement("div",{className:"message-content"},s.a.createElement("div",{className:"message-content__sender"},this.props.sender," | ","".concat(this.time(this.props.createdAt))),s.a.createElement("div",{className:"message-content__message"},this.props.message)))}}]),t}(s.a.Component)),y=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return null===this.props.roomId?s.a.createElement("div",{className:"message-list flex-center"},s.a.createElement("div",{className:"no-room-selected"},s.a.createElement("h1",null,"\u2190 Select a Channel")),s.a.createElement("div",null)):0===this.props.messages.length?s.a.createElement("div",{className:"message-list flex-center"},s.a.createElement("div",{className:"message-list__empty"},s.a.createElement(O,null),s.a.createElement("h2",null,"No Messages Yet"),s.a.createElement("p",null,"Be the first to post in this room!")),s.a.createElement("div",null)):s.a.createElement("div",{className:"message-list"},this.props.messages.map(function(t){return s.a.createElement(E,{message:t.text,sender:t.senderId,time:t.createdAt,key:t.id,createdAt:t.createdAt,userName:e.props.userName})}))}}]),t}(s.a.Component),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={roomName:""},e.handleInput=e.handleInput.bind(Object(d.a)(Object(d.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createRoom(this.state.roomName),this.setState({roomName:""})}},{key:"handleInput",value:function(e){this.setState({roomName:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"new-room-form"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{placeholder:"Create a room",value:this.state.roomName,onChange:this.handleInput,maxLength:"20"})))}}]),t}(s.a.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Object(o.a)(this.props.rooms).sort(function(e,t){return e.id>t.id});return s.a.createElement("div",{className:"room-list"},s.a.createElement("ul",null,t.map(function(t){return s.a.createElement("li",{key:t.id,onClick:function(){return e.props.subscribeToRoom(t.id)}},"# ",t.name)})))}}]),t}(s.a.Component);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var C=s.a.createElement("g",null,s.a.createElement("g",{id:"send"},s.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75 \t\t"}))),S=s.a.createElement("g",null),w=s.a.createElement("g",null),R=s.a.createElement("g",null),x=s.a.createElement("g",null),T=s.a.createElement("g",null),M=s.a.createElement("g",null),U=s.a.createElement("g",null),_=s.a.createElement("g",null),A=s.a.createElement("g",null),L=s.a.createElement("g",null),D=s.a.createElement("g",null),H=s.a.createElement("g",null),V=s.a.createElement("g",null),B=s.a.createElement("g",null),z=s.a.createElement("g",null),P=function(e){return s.a.createElement("svg",I({version:1.1,id:"Capa_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"535.5px",height:"535.5px",viewBox:"0 0 535.5 535.5",style:{enableBackground:"new 0 0 535.5 535.5"},xmlSpace:"preserve"},e),C,S,w,R,x,T,M,U,_,A,L,D,H,V,B,z)},K=(a.p,function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={message:""},e.handleChange=e.handleChange.bind(Object(d.a)(Object(d.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(d.a)(Object(d.a)(e))),e.sendMessage=e.sendMessage.bind(Object(d.a)(Object(d.a)(e))),e.handleClick=e.handleClick.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(){this.sendMessage()}},{key:"handleChange",value:function(e){this.setState({message:e.target.value}),this.props.typingIndicator()}},{key:"handleSubmit",value:function(e){13===e.keyCode&&(e.preventDefault(),this.sendMessage())}},{key:"sendMessage",value:function(){this.props.sendMessage(this.state.message),this.setState({message:""})}},{key:"render",value:function(){return null!==this.props.roomName?s.a.createElement("div",{className:"send-message-form"},s.a.createElement("textarea",{onChange:this.handleChange,onKeyDown:this.handleSubmit,value:this.state.message,disabled:null===this.props.roomId,placeholder:"Message #".concat(this.props.roomName),rows:"1"}),s.a.createElement(P,{className:"send-button",onClick:this.handleClick})):s.a.createElement("div",{className:"send-message-form"})}}]),t}(s.a.Component)),J=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"user"},s.a.createElement("img",{src:"https://identicon-api.herokuapp.com/".concat(this.props.userName,"/50?format=png"),alt:"user avatar"}),s.a.createElement("span",null,this.props.userName))}}]),t}(s.a.Component),X=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.roomName?s.a.createElement("div",{className:"current-room"},"#",this.props.roomName):s.a.createElement("div",{className:"current-room"})}}]),t}(s.a.Component),q=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={userName:""},e.handleChange=e.handleChange.bind(Object(d.a)(Object(d.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(d.a)(Object(d.a)(e))),e.cacheUsername=e.cacheUsername.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({userName:e.target.value})}},{key:"handleSubmit",value:function(e){13===e.keyCode&&(this.props.logIn(this.state.userName),this.cacheUsername(this.state.userName))}},{key:"cacheUsername",value:function(e){localStorage.setItem("userName",e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement("h1",null,"Enter your username"),s.a.createElement("input",{value:this.state.userName,spellCheck:"false",maxLength:"15",onChange:this.handleChange,onKeyDown:this.handleSubmit}))}}]),t}(s.a.Component),Y=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.userIsTyping?s.a.createElement("div",{className:"typing-indicator"},"".concat(this.props.userIsTyping," is typing..")):null}}]),t}(s.a.Component),F=(a(410),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={roomId:null,messages:[],joinableRooms:[],joinedRooms:[],roomName:null,userName:"",isLoggedIn:!1,chatConnectInit:!1,userIsTyping:null},e.myRef=s.a.createRef(),e.sendMessage=e.sendMessage.bind(Object(d.a)(Object(d.a)(e))),e.getRooms=e.getRooms.bind(Object(d.a)(Object(d.a)(e))),e.subscribeToRoom=e.subscribeToRoom.bind(Object(d.a)(Object(d.a)(e))),e.createRoom=e.createRoom.bind(Object(d.a)(Object(d.a)(e))),e.logIn=e.logIn.bind(Object(d.a)(Object(d.a)(e))),e.typingIndicator=e.typingIndicator.bind(Object(d.a)(Object(d.a)(e))),e.scrollToEnd=e.scrollToEnd.bind(Object(d.a)(Object(d.a)(e))),e.checkCachedUsername=e.checkCachedUsername.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkCachedUsername()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.chatConnectInit||new b.ChatManager({instanceLocator:"v1:us1:fb26ac6a-c4a4-43c6-afb1-3f8a573b1029",userId:this.state.userName,tokenProvider:new b.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/fb26ac6a-c4a4-43c6-afb1-3f8a573b1029/token"})}).connect().then(function(t){e.currentUser=t,e.setState({chatConnectInit:!0}),e.getRooms()});this.scrollToEnd()}},{key:"logIn",value:function(e){var t=this;new g.a({instanceLocator:"v1:us1:fb26ac6a-c4a4-43c6-afb1-3f8a573b1029",key:"c1fbcb22-87d1-4a3c-8a4a-c3c757bb32f2:01K/tzhgYO6n9jA/y6KEhAPqyAhqDkpAF5H1XdfV+Vc="}).createUser({id:e,name:e}).then(function(){t.setState({userName:e,isLoggedIn:!0})}).catch(function(e){console.log("Error creating user: "+e)})}},{key:"getRooms",value:function(){var e=this;this.currentUser.getJoinableRooms().then(function(t){e.setState({joinedRooms:e.currentUser.rooms,joinableRooms:t})}).catch(function(e){console.log("Error fetching joinableRooms: ".concat(e))})}},{key:"subscribeToRoom",value:function(e){var t=this;this.setState({messages:[]}),this.currentUser.subscribeToRoom({roomId:e,hooks:{onMessage:function(e){t.setState({messages:Object(o.a)(t.state.messages).concat([e])})},onUserStartedTyping:function(e){t.setState({userIsTyping:e.name})},onUserStoppedTyping:function(e){t.setState({userIsTyping:null})}},messageLimit:5}).then(function(e){t.setState({roomId:e.id,roomName:e.name})}),this.getRooms()}},{key:"createRoom",value:function(e){var t=this;this.currentUser.createRoom({name:e}).then(function(e){t.subscribeToRoom(e.id)}).catch(function(e){console.log("Error creating room ".concat(e))})}},{key:"sendMessage",value:function(e){this.currentUser.sendMessage({text:e,roomId:this.state.roomId}).catch(function(e){console.log("Error adding message: ".concat(e))})}},{key:"typingIndicator",value:function(){this.currentUser.isTypingIn({roomId:this.state.roomId}).catch(function(e){console.log("Error sending typing indicator: ".concat(e))})}},{key:"scrollToEnd",value:function(){var e=this.myRef.current;e&&(e.scrollTop=e.scrollHeight)}},{key:"checkCachedUsername",value:function(){var e=localStorage.getItem("userName");e&&this.setState({userName:e,isLoggedIn:!0})}},{key:"render",value:function(){return this.state.isLoggedIn?s.a.createElement("div",{className:"App"},s.a.createElement(J,{userName:this.state.userName}),s.a.createElement(X,{roomName:this.state.roomName}),s.a.createElement(N,{subscribeToRoom:this.subscribeToRoom,rooms:Object(o.a)(this.state.joinableRooms).concat(Object(o.a)(this.state.joinedRooms))}),s.a.createElement(k,{createRoom:this.createRoom}),s.a.createElement("div",{className:"App__sub-grid",ref:this.myRef},s.a.createElement(y,{messages:this.state.messages,roomId:this.state.roomId,userName:this.state.userName}),null===this.state.roomId?null:s.a.createElement(Y,{userIsTyping:this.state.userIsTyping})),s.a.createElement(K,{sendMessage:this.sendMessage,roomId:this.state.roomId,roomName:this.state.roomName,typingIndicator:this.typingIndicator})):s.a.createElement(q,{logIn:this.logIn})}}]),t}(n.Component));c.a.render(s.a.createElement(F,null),document.getElementById("root"))}},[[168,2,1]]]);
//# sourceMappingURL=main.7b897595.chunk.js.map